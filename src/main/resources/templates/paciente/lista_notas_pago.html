<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Mis Pagos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">

  <!-- Barra superior con botón de logout -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3><i class="bi bi-receipt"></i> Historial de Pagos</h3>
    <form th:action="@{/logout}" method="post" class="mb-0">
      <button type="submit" class="btn btn-danger">
        <i class="bi bi-box-arrow-right"></i> Cerrar sesión
      </button>
    </form>
  </div>

  <div th:if="${notas.isEmpty()}">
    <div class="alert alert-info text-center" role="alert">
      No tienes pagos registrados aún.
    </div>
  </div>

  <div th:if="${notas.size() > 0}">
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-primary text-center">
        <tr>
          <th>#</th>
          <th>Fecha de Pago</th>
          <th>Monto</th>
          <th>Fecha de Cita</th>
          <th>Hora</th>
          <th>Médico</th>
          <th>Especialidad</th>
          <th>Consultorio</th>
        </tr>
        </thead>
        <tbody class="text-center">
        <tr th:each="nota, iterStat : ${notas}">
          <td th:text="${iterStat.index + 1}"></td>
          <td th:text="${#temporals.format(nota.fechaPago, 'dd/MM/yyyy HH:mm')}"></td>
          <td th:text="'S/ ' + ${nota.monto}"></td>
          <td th:text="${#temporals.format(nota.horarioMedicoHora.horarioMedico.horario.fechaHorario, 'dd/MM/yyyy')}"></td>
          <td th:text="${nota.horarioMedicoHora.hora.horaInicio + ' - ' + nota.horarioMedicoHora.hora.horaFin}"></td>
          <td th:text="${nota.horarioMedicoHora.horarioMedico.medico.nombreMedico}"></td>
          <td th:text="${nota.horarioMedicoHora.horarioMedico.medico.especialidad.nombreEspecialidad}"></td>
          <td th:text="${nota.horarioMedicoHora.consultorio.nombreConsultorio}"></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="text-end mt-3">
    <a th:href="@{/horarios-disponibles}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left"></i> Volver
    </a>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
